@using WebApp.ViewModels
@model SubmittedHealthDetailsViewModel

@if (TempData["Message"] != null)
{
    <div class="alert alert-@TempData["MessageType"]">
        @TempData["Message"]
    </div>
}

@if (Model == null)
{
    <p>Model is null.</p>
}
else
{
    <!-- Form for Submitting Health Records -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="card-title mb-0">Submit Health Records</h5>
        </div>
        <div class="card-body">
            <form method="post" asp-action="Create" asp-controller="SubmittedHealthDetails" enctype="multipart/form-data">
                <div asp-validation-summary="All" class="text-danger"></div>

                <!-- Health Information -->
                <div class="mb-4">
                    <h5 class="mb-3">Health Information</h5>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="bloodType" class="form-label">Blood Type</label>
                            <select class="form-select" id="bloodType" name="BloodType">
                                <option value="" selected="@(string.IsNullOrEmpty(Model.BloodType))">Select Blood Type</option>
                                <option value="A+" selected="@(Model.BloodType == "A+")">A+</option>
                                <option value="A-" selected="@(Model.BloodType == "A-")">A-</option>
                                <option value="B+" selected="@(Model.BloodType == "B+")">B+</option>
                                <option value="B-" selected="@(Model.BloodType == "B-")">B-</option>
                                <option value="AB+" selected="@(Model.BloodType == "AB+")">AB+</option>
                                <option value="AB-" selected="@(Model.BloodType == "AB-")">AB-</option>
                                <option value="O+" selected="@(Model.BloodType == "O+")">O+</option>
                                <option value="O-" selected="@(Model.BloodType == "O-")">O-</option>
                                <option value="Unknown" selected="@(Model.BloodType == "Unknown")">Unknown</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="allergies" class="form-label">Allergies</label>
                            <input type="text" class="form-control" id="allergies" name="Allergies"
                                value="@Model.Allergies">
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact Information -->
                <div class="mb-4">
                    <h5 class="mb-3">Emergency Contact</h5>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="emergencyContactName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="emergencyContactName" name="EmergencyContactName"
                                value="@Model.EmergencyContactName">
                        </div>
                        <div class="col-md-6">
                            <label for="emergencyContactRelationship" class="form-label">Relationship</label>
                            <input type="text" class="form-control" id="emergencyContactRelationship"
                                name="EmergencyContactRelationship" value="@Model.EmergencyContactRelationship">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="emergencyContactPhone" class="form-label">Phone Number</label>
                            <input type="text" class="form-control" id="emergencyContactPhone" name="EmergencyContactPhone"
                                value="@Model.EmergencyContactPhone">
                        </div>
                    </div>
                </div>

                <!-- Health Documents -->
                <div class="mb-4">
                    <h5 class="mb-3">Health Documents</h5>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="xRayFile" class="form-label">X-Ray Results</label>
                            <input type="file" class="form-control" id="xRayFile" name="XRayFile">
                        </div>
                        <div class="col-md-6">
                            <label for="medicalCertificate" class="form-label">Medical Certificate</label>
                            <input type="file" class="form-control" id="medicalCertificate" name="MedicalCertificate">
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="vaccinationRecord" class="form-label">Vaccination Record</label>
                            <input type="file" class="form-control" id="vaccinationRecord" name="VaccinationRecord">
                        </div>
                        <div class="col-md-6">
                            <label for="otherDocuments" class="form-label">Other Documents</label>
                            <input type="file" class="form-control" id="otherDocuments" name="OtherDocuments">
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="row mb-3">
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary btn-modern">
                            <i class="fas fa-paper-plane"></i> Submit
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
}